{"version":3,"file":"static/js/867.e161d406.chunk.js","mappings":"8KACA,EAA8B,iC,wCCA9B,EAAoC,uCAApC,EAAwF,gCAAxF,EAAoI,+BAApI,EAAuL,uCAAvL,EAAoP,yC,SCsEpP,EA7DoB,SAAC,GAA0C,IAAxCA,EAAuC,EAAvCA,GAAIC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,IAAKC,EAAiB,EAAjBA,WACrCC,GAAuBC,EAAAA,EAAAA,IAAYC,EAAAA,IACnCC,GAAWC,EAAAA,EAAAA,MAiBXC,EAAqB,SAAAC,GACzB,IAAMC,EAAOP,EAAqBQ,MAChC,SAAAC,GAAO,OAAIA,EAAQV,aAAeO,EAAWP,cAG/C,OADAW,QAAQC,IAAI,OAAQJ,GACbA,GAGT,OACE,eAAIK,UAAWC,EAAf,UACE,iBAAKD,UAAWC,EAAhB,WACE,gBAAKD,UAAWC,EAAeC,IAAKhB,EAAKiB,IAAI,GAAGC,MAAO,OACvD,iBAAMJ,UAAWC,EAAjB,mBAA4CjB,EAA5C,QACA,iBAAMgB,UAAWC,EAAjB,mBAA4ChB,EAA5C,SACA,mBACEe,UAAWC,EACXI,QAAS,SAAAC,GA/BmB,IAAAZ,EAAAA,EAgCE,CAC1BX,GAAAA,EACAC,KAAAA,EACAC,MAAAA,EACAE,WAAAA,EACAD,IAAAA,EACAqB,MAAO,GArCAnB,EAAqBQ,MACpC,SAAAC,GAAO,OAAIA,EAAQd,KAAOW,EAAWX,MAGrCQ,GAASiB,EAAAA,EAAAA,IAAwBd,IAG/BD,EAAmBC,IAA+C,IAAhCN,EAAqBqB,OACzDlB,GAASmB,EAAAA,EAAAA,IAAmBhB,IAE5BI,QAAQC,IAAI,kCAkBV,SAaGX,EAAqBQ,MAAK,SAAAC,GAAO,OAAIA,EAAQd,KAAOA,KACjD,mBACA,sBCLd,EA3CoB,WAClB,IAAQ4B,GAAgBC,EAAAA,EAAAA,MAAhBD,YACFvB,GAAuBC,EAAAA,EAAAA,IAAYC,EAAAA,IACzCQ,QAAQC,IAAI,cAAeY,GAC3B,OAAsBE,EAAAA,EAAAA,MAAdC,KAAAA,OAAR,MAAe,GAAf,EAcMC,IARW3B,EAAqBQ,MAClC,SAAAC,GAAO,OAAIA,EAAQV,aAAewB,KAStC,OADAb,QAAQC,IAAI,WAAYgB,IAEtB,8BACGD,EAAKA,OACJ,eAAId,UAAWC,EAAf,SAjBuB,SAACe,EAAUL,GACtC,OAAOK,EAASC,QAAO,SAAApB,GAAO,OAAIA,EAAQV,aAAewB,KAiBlDO,CAAqBJ,EAAKA,KAAMH,GAAaQ,KAC5C,gBAAGC,EAAH,EAAGA,IAAKpC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MAAOC,EAArB,EAAqBA,IAAKC,EAA1B,EAA0BA,WAA1B,OACE,SAAC,EAAD,CACEJ,GAAIqC,EACJpC,KAAMA,EACNC,MAAOA,EACPC,IAAKA,EACLC,WAAYA,EACZ4B,SAAUA,GACLK,WCtCrB,EAJoB,WAClB,OAAO,SAAC,EAAD","sources":["webpack://react-homework/./src/components/ProductsList/ProductList.module.css?543c","webpack://react-homework/./src/components/ProductItem/ProductItem.module.css?865c","components/ProductItem/ProductItem.jsx","components/ProductsList/ProductList.jsx","pages/CompanyPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"productList\":\"ProductList_productList__VUZYO\"};","// extracted by mini-css-extract-plugin\nexport default {\"productList__item\":\"ProductItem_productList__item__W-6wR\",\"itemwraper\":\"ProductItem_itemwraper__j02gT\",\"itemImage\":\"ProductItem_itemImage__BkL-V\",\"productList__text\":\"ProductItem_productList__text__J7E39\",\"productList__button\":\"ProductItem_productList__button__EdH9J\",\"active\":\"ProductItem_active__DlqWo\"};","import React from 'react';\nimport css from './ProductItem.module.css';\nimport propTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  addProductInBasket,\n  deleteProductFromBasket,\n  getUserProductsInBasket,\n} from 'redux/orderBasketSlice/orderBasketSlice';\n\nconst ProductItem = ({ id, name, price, img, restoraunt }) => {\n  const userProductsInBasket = useSelector(getUserProductsInBasket);\n  const dispatch = useDispatch();\n\n  const handleToggleProductInBasket = newProduct => {\n    const inBasket = userProductsInBasket.find(\n      product => product.id === newProduct.id\n    );\n    if (inBasket) {\n      dispatch(deleteProductFromBasket(newProduct));\n      return;\n    }\n    if (disabledOtherShops(newProduct) || userProductsInBasket.length === 0) {\n      dispatch(addProductInBasket(newProduct));\n    } else {\n      console.log('you cant add other restoraunt');\n    }\n  };\n\n  const disabledOtherShops = newProduct => {\n    const shop = userProductsInBasket.find(\n      product => product.restoraunt === newProduct.restoraunt\n    );\n    console.log('shop', shop);\n    return shop;\n  };\n\n  return (\n    <li className={css.productList__item}>\n      <div className={css.itemwraper}>\n        <img className={css.itemImage} src={img} alt=\"\" width={200} />\n        <span className={css.productList__text}>{`${name} `}</span>\n        <span className={css.productList__text}>{`${price} $`}</span>\n        <button\n          className={css.productList__button}\n          onClick={e => {\n            handleToggleProductInBasket({\n              id,\n              name,\n              price,\n              restoraunt,\n              img,\n              count: 1,\n            });\n          }}\n        >\n          {userProductsInBasket.find(product => product.id === id)\n            ? 'delete from card'\n            : 'Add to card'}\n        </button>\n      </div>\n    </li>\n  );\n};\n\nProductItem.propTypes = {\n  id: propTypes.string.isRequired,\n  name: propTypes.string.isRequired,\n  // number: propTypes.string.isRequired,\n};\n\nexport default ProductItem;\n","import React from 'react';\nimport css from './ProductList.module.css';\nimport { useParams } from 'react-router-dom';\n\nimport { useSelector } from 'react-redux';\n\nimport { useGetCompanyItemsRTKQuery } from 'redux/RTKProductsApi/ProductsApi';\nimport { getUserProductsInBasket } from 'redux/orderBasketSlice/orderBasketSlice';\nimport ProductItem from 'components/ProductItem/ProductItem';\n\nconst ProductList = () => {\n  const { companyName } = useParams();\n  const userProductsInBasket = useSelector(getUserProductsInBasket);\n  console.log('companyName', companyName);\n  const { data = [] } = useGetCompanyItemsRTKQuery();\n\n  const filteredShopsProduct = (response, companyName) => {\n    return response.filter(product => product.restoraunt === companyName);\n  };\n  const disabledButtons = () => {\n    const basket = userProductsInBasket.find(\n      product => product.restoraunt !== companyName\n    );\n    if (basket) {\n      return true;\n    }\n    return false;\n  };\n  const disabled = disabledButtons();\n  console.log('disabled', disabled);\n  return (\n    <>\n      {data.data && (\n        <ul className={css.productList}>\n          {filteredShopsProduct(data.data, companyName).map(\n            ({ _id, name, price, img, restoraunt }) => (\n              <ProductItem\n                id={_id}\n                name={name}\n                price={price}\n                img={img}\n                restoraunt={restoraunt}\n                disabled={disabled}\n                key={_id}\n              />\n            )\n          )}\n        </ul>\n      )}\n    </>\n  );\n};\n\nexport default ProductList;\n","import ProductList from 'components/ProductsList/ProductList';\r\nconst CompanyPage = () => {\r\n  return <ProductList />;\r\n};\r\n\r\nexport default CompanyPage;\r\n"],"names":["id","name","price","img","restoraunt","userProductsInBasket","useSelector","getUserProductsInBasket","dispatch","useDispatch","disabledOtherShops","newProduct","shop","find","product","console","log","className","css","src","alt","width","onClick","e","count","deleteProductFromBasket","length","addProductInBasket","companyName","useParams","useGetCompanyItemsRTKQuery","data","disabled","response","filter","filteredShopsProduct","map","_id"],"sourceRoot":""}